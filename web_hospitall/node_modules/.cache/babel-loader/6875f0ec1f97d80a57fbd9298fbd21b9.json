{"remainingRequest":"C:\\Users\\FPTSHOP\\Downloads\\doan-main\\doan-main\\web_hospitall\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\FPTSHOP\\Downloads\\doan-main\\doan-main\\web_hospitall\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\FPTSHOP\\Downloads\\doan-main\\doan-main\\web_hospitall\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\FPTSHOP\\Downloads\\doan-main\\doan-main\\web_hospitall\\src\\components\\ChatPopupContent.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\FPTSHOP\\Downloads\\doan-main\\doan-main\\web_hospitall\\src\\components\\ChatPopupContent.vue","mtime":1655485572000},{"path":"C:\\Users\\FPTSHOP\\Downloads\\doan-main\\doan-main\\web_hospitall\\babel.config.js","mtime":1655485572000},{"path":"C:\\Users\\FPTSHOP\\Downloads\\doan-main\\doan-main\\web_hospitall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1696259727396},{"path":"C:\\Users\\FPTSHOP\\Downloads\\doan-main\\doan-main\\web_hospitall\\node_modules\\babel-loader\\lib\\index.js","mtime":1696259729020},{"path":"C:\\Users\\FPTSHOP\\Downloads\\doan-main\\doan-main\\web_hospitall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1696259727396},{"path":"C:\\Users\\FPTSHOP\\Downloads\\doan-main\\doan-main\\web_hospitall\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1696259729376}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvRlBUU0hPUC9Eb3dubG9hZHMvZG9hbi1tYWluL2RvYW4tbWFpbi93ZWJfaG9zcGl0YWxsL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICd2dWV4JzsKaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnOwppbXBvcnQgeyBVUkxfSU1BR0UgfSBmcm9tICcuLi9Db25maWcnOwptb21lbnQubG9jYWxlKCJWSSIpOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IFsnbWVzc2FnZXMnLCAnc2VuZE1lc3NhZ2UnLCAnaWRhZG1pbicsICdpZCcsICdkb2N0b3InLCAnc2V0TWVzc2FnZScsICdncm91cENoYXQnLCAnX2lkJ10sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBjb250ZW50OiAnJywKICAgICAgbW9tZW50OiBtb21lbnQsCiAgICAgIHVybEltYWdlOiBVUkxfSU1BR0UKICAgIH07CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZCh7fSwgbWFwU3RhdGUoWydzb2NrZXQnXSkpLAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZUlucHV0U2VuZE1lc3NhZ2U6IGZ1bmN0aW9uIGhhbmRsZUlucHV0U2VuZE1lc3NhZ2UoZXZlbnQpIHsKICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDEzKSB7CiAgICAgICAgdGhpcy5oYW5kbGVTZW5kTWVzc2FnZSgpOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlU2VuZE1lc3NhZ2U6IGZ1bmN0aW9uIGhhbmRsZVNlbmRNZXNzYWdlKCkgewogICAgICBpZiAodGhpcy5jb250ZW50Lmxlbmd0aCAhPT0gMCkgewogICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICAgdGhpcy5zZW5kTWVzc2FnZSh7CiAgICAgICAgICBjb250ZW50X2NoYXQ6IHRoaXMuY29udGVudCwKICAgICAgICAgIGlkYWRtaW46IHRoaXMuaWQKICAgICAgICB9KTsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB0aGlzLmNvbnRlbnQgPSAnJzsKICAgICAgfQogICAgfSwKICAgIG9uSW5wdXQ6IGZ1bmN0aW9uIG9uSW5wdXQoZXZlbnQpIHsKICAgICAgdGhpcy5jb250ZW50ID0gZXZlbnQudGFyZ2V0LnZhbHVlOwogICAgfSwKICAgIHVwZGF0ZUZvcm1hdFRpbWU6IGZ1bmN0aW9uIHVwZGF0ZUZvcm1hdFRpbWUoZCkgewogICAgICB2YXIgY2hlY2tOdW1iZXIgPSBmdW5jdGlvbiBjaGVja051bWJlcihudW1iZXIpIHsKICAgICAgICByZXR1cm4gbnVtYmVyIDwgMTAgPyAiMCIuY29uY2F0KG51bWJlcikgOiBudW1iZXI7CiAgICAgIH07CgogICAgICByZXR1cm4gY2hlY2tOdW1iZXIoZC5nZXREYXRlKCkpICsgIi0iICsgY2hlY2tOdW1iZXIoZC5nZXRNb250aCgpICsgMSkgKyAiLSIgKyBkLmdldEZ1bGxZZWFyKCkgKyAiICIgKyBjaGVja051bWJlcihkLmdldEhvdXJzKCkpICsgIjoiICsgY2hlY2tOdW1iZXIoZC5nZXRNaW51dGVzKCkpOwogICAgfSwKICAgIHNvY2tldE9uOiBmdW5jdGlvbiBzb2NrZXRPbigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRyeSB7CiAgICAgICAgdmFyIF90aGlzJGdyb3VwQ2hhdDsKCiAgICAgICAgdGhpcy5zb2NrZXQub24oIl9jaGF0TWVzc2FnZS4iLmNvbmNhdCgoX3RoaXMkZ3JvdXBDaGF0ID0gdGhpcy5ncm91cENoYXQpID09PSBudWxsIHx8IF90aGlzJGdyb3VwQ2hhdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkZ3JvdXBDaGF0LmlkLCAiLiIpLmNvbmNhdCh0aGlzLl9pZCksIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnbmhhbiByb2kgbmUnKTsKCiAgICAgICAgICBfdGhpcy5zZXRNZXNzYWdlKGRhdGEpOwogICAgICAgIH0pOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGFsZXJ0KGVycm9yKTsKICAgICAgfQogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGdyb3VwQ2hhdDogZnVuY3Rpb24gZ3JvdXBDaGF0KCkgewogICAgICB0aGlzLnNvY2tldE9uKCk7CiAgICB9LAogICAgX2lkOiBmdW5jdGlvbiBfaWQoKSB7CiAgICAgIHRoaXMuc29ja2V0T24oKTsKICAgIH0sCiAgICBtZXNzYWdlczogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKCkgewogICAgICAgIGlmICh0aGlzLiRyZWZzLmNvbnRhaW5lck1lc3NhZ2UpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuJHJlZnMuY29udGFpbmVyTWVzc2FnZS5zY3JvbGxIZWlnaHQpOwogICAgICAgICAgdGhpcy4kcmVmcy5jb250YWluZXJNZXNzYWdlLnNjcm9sbFRvcCA9IHRoaXMuJHJlZnMuY29udGFpbmVyTWVzc2FnZS5zY3JvbGxIZWlnaHQ7CiAgICAgICAgfQogICAgICB9LAogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLnNvY2tldE9uKCk7CgogICAgaWYgKHRoaXMuJHJlZnMuY29udGFpbmVyTWVzc2FnZSkgewogICAgICBjb25zb2xlLmxvZyh0aGlzLiRyZWZzLmNvbnRhaW5lck1lc3NhZ2Uuc2Nyb2xsSGVpZ2h0KTsKICAgICAgdGhpcy4kcmVmcy5jb250YWluZXJNZXNzYWdlLnNjcm9sbFRvcCA9IHRoaXMuJHJlZnMuY29udGFpbmVyTWVzc2FnZS5zY3JvbGxIZWlnaHQ7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":"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","names":["mapState","moment","URL_IMAGE","locale","props","data","loading","content","urlImage","computed","methods","handleInputSendMessage","event","keyCode","handleSendMessage","length","sendMessage","content_chat","idadmin","id","onInput","target","value","updateFormatTime","d","checkNumber","number","getDate","getMonth","getFullYear","getHours","getMinutes","socketOn","socket","on","groupChat","_id","console","log","setMessage","error","alert","watch","messages","handler","$refs","containerMessage","scrollHeight","scrollTop","immediate","mounted"],"sourceRoot":"","sources":["C:\\Users\\FPTSHOP\\Downloads\\doan-main\\doan-main\\web_hospitall\\src\\components\\ChatPopupContent.vue"],"sourcesContent":["<template>\n    <div class=\"chat__right--content--content\" ref=\"containerMessage\">\n        <div v-if=\"messages?.length\">\n            <div v-for=\"message in messages\" :key=\"message.id\">\n                <div v-if=\"message.is_user == id\" class=\"message__item flex-start\">\n                    <div class=\"message__item--image\">\n                        <img :src=\"urlImage + (message.is_user == id ? 'user-vector.jpeg' : 'doctor-vector.webp')\"\n                            alt=\"\">\n                        <span></span>\n                    </div>\n                    <div class=\"message__item--content\">\n                        <p>{{ message.content_chat }}</p>\n                        <span>\n                            {{ moment(message.created_at_main).fromNow() }}\n                        </span>\n                    </div>\n                </div>\n                <div v-else class=\"message__item flex-end\">\n                    <div class=\"message__item--content\">\n                        <p>{{ message.content_chat }}</p>\n                        <span>\n                            {{ moment(message.created_at_main).fromNow() }}\n                        </span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div v-else class=\"loading__content\"\n            style=\"text-align: center;padding:0rem 2rem;font-size: 1.3rem;font-weight: 600;\">\n            Bây giờ bạn có thể trò chuyện với bác sĩ\n        </div>\n    </div>\n    <div class=\"chat__right--content--control\">\n        <input v-if=\"loading\" type=\"text\" placeholder=\"Search\" :value=\"content\" disabled>\n        <input v-else type=\"text\" @keydown=\"handleInputSendMessage($event)\" @input=\"onInput($event)\" :value=\"content\"\n            placeholder=\"Search\">\n        <span v-if=\"content.length !== 0\" @click=\"handleSendMessage\"\n            :class=\"loading ? 'bx bx-loader loading' : 'bx bx-send'\"></span>\n        <span v-else class=\"bx bx-send disabled\"></span>\n    </div>\n</template>\n<script>\nimport { mapState } from 'vuex';\nimport moment from 'moment';\nimport { URL_IMAGE } from '../Config';\n\nmoment.locale(\"VI\");\n\nexport default {\n    props: ['messages', 'sendMessage', 'idadmin', 'id', 'doctor', 'setMessage', 'groupChat', '_id'],\n    data() {\n        return {\n            loading: false,\n            content: '',\n            moment: moment,\n            urlImage: URL_IMAGE\n        }\n    },\n    computed: {\n        ...mapState(['socket'])\n    },\n    methods: {\n        handleInputSendMessage: function (event) {\n            if (event.keyCode === 13) {\n                this.handleSendMessage();\n            }\n        },\n        handleSendMessage: function () {\n            if (this.content.length !== 0) {\n                this.loading = true;\n                this.sendMessage({ content_chat: this.content, idadmin: this.id });\n                this.loading = false;\n                this.content = '';\n            }\n        },\n        onInput: function (event) {\n            this.content = event.target.value\n        },\n        updateFormatTime: function (d) {\n            const checkNumber = (number) => number < 10 ? `0${number}` : number;\n            return checkNumber(d.getDate()) + \"-\" + checkNumber((d.getMonth() + 1)) + \"-\" + d.getFullYear() + \" \" +\n                checkNumber(d.getHours()) + \":\" + checkNumber(d.getMinutes())\n        },\n        socketOn: function () {\n            try {\n                this.socket.on(`_chatMessage.${this.groupChat?.id}.${this._id}`, (data) => {\n                    console.log('nhan roi ne');\n                    this.setMessage(data);\n                })\n            } catch (error) {\n                alert(error);\n            }\n        }\n    },\n    watch: {\n        groupChat: function () {\n            this.socketOn();\n        },\n        _id: function () {\n            this.socketOn();\n        },\n        messages: {\n            handler() {\n                if (this.$refs.containerMessage) {\n                    console.log(this.$refs.containerMessage.scrollHeight);\n                    this.$refs.containerMessage.scrollTop = this.$refs.containerMessage.scrollHeight;\n                }\n            },\n            immediate: true\n        }\n    },\n    mounted() {\n        this.socketOn();\n        if (this.$refs.containerMessage) {\n            console.log(this.$refs.containerMessage.scrollHeight);\n            this.$refs.containerMessage.scrollTop = this.$refs.containerMessage.scrollHeight;\n        }\n    }\n}\n</script>"]}]}