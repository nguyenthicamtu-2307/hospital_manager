{"remainingRequest":"C:\\Users\\FPTSHOP\\Downloads\\doan-main\\doan-main\\web_hospitall\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\FPTSHOP\\Downloads\\doan-main\\doan-main\\web_hospitall\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!C:\\Users\\FPTSHOP\\Downloads\\doan-main\\doan-main\\web_hospitall\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\FPTSHOP\\Downloads\\doan-main\\doan-main\\web_hospitall\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\FPTSHOP\\Downloads\\doan-main\\doan-main\\web_hospitall\\src\\components\\ChatPopupContent.vue?vue&type=template&id=07565956","dependencies":[{"path":"C:\\Users\\FPTSHOP\\Downloads\\doan-main\\doan-main\\web_hospitall\\src\\components\\ChatPopupContent.vue","mtime":1655485572000},{"path":"C:\\Users\\FPTSHOP\\Downloads\\doan-main\\doan-main\\web_hospitall\\babel.config.js","mtime":1655485572000},{"path":"C:\\Users\\FPTSHOP\\Downloads\\doan-main\\doan-main\\web_hospitall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1696259727396},{"path":"C:\\Users\\FPTSHOP\\Downloads\\doan-main\\doan-main\\web_hospitall\\node_modules\\babel-loader\\lib\\index.js","mtime":1696259729020},{"path":"C:\\Users\\FPTSHOP\\Downloads\\doan-main\\doan-main\\web_hospitall\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1696259730480},{"path":"C:\\Users\\FPTSHOP\\Downloads\\doan-main\\doan-main\\web_hospitall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1696259727396},{"path":"C:\\Users\\FPTSHOP\\Downloads\\doan-main\\doan-main\\web_hospitall\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1696259729376}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVuZGVyTGlzdCBhcyBfcmVuZGVyTGlzdCwgRnJhZ21lbnQgYXMgX0ZyYWdtZW50LCBvcGVuQmxvY2sgYXMgX29wZW5CbG9jaywgY3JlYXRlRWxlbWVudEJsb2NrIGFzIF9jcmVhdGVFbGVtZW50QmxvY2ssIGNyZWF0ZUVsZW1lbnRWTm9kZSBhcyBfY3JlYXRlRWxlbWVudFZOb2RlLCB0b0Rpc3BsYXlTdHJpbmcgYXMgX3RvRGlzcGxheVN0cmluZywgY3JlYXRlQ29tbWVudFZOb2RlIGFzIF9jcmVhdGVDb21tZW50Vk5vZGUsIG5vcm1hbGl6ZUNsYXNzIGFzIF9ub3JtYWxpemVDbGFzcyB9IGZyb20gInZ1ZSI7CnZhciBfaG9pc3RlZF8xID0gewogIGNsYXNzOiAiY2hhdF9fcmlnaHQtLWNvbnRlbnQtLWNvbnRlbnQiLAogIHJlZjogImNvbnRhaW5lck1lc3NhZ2UiCn07CnZhciBfaG9pc3RlZF8yID0gewogIGtleTogMAp9Owp2YXIgX2hvaXN0ZWRfMyA9IHsKICBrZXk6IDAsCiAgY2xhc3M6ICJtZXNzYWdlX19pdGVtIGZsZXgtc3RhcnQiCn07CnZhciBfaG9pc3RlZF80ID0gewogIGNsYXNzOiAibWVzc2FnZV9faXRlbS0taW1hZ2UiCn07CnZhciBfaG9pc3RlZF81ID0gWyJzcmMiXTsKCnZhciBfaG9pc3RlZF82ID0gLyojX19QVVJFX18qL19jcmVhdGVFbGVtZW50Vk5vZGUoInNwYW4iLCBudWxsLCBudWxsLCAtMQovKiBIT0lTVEVEICovCik7Cgp2YXIgX2hvaXN0ZWRfNyA9IHsKICBjbGFzczogIm1lc3NhZ2VfX2l0ZW0tLWNvbnRlbnQiCn07CnZhciBfaG9pc3RlZF84ID0gewogIGtleTogMSwKICBjbGFzczogIm1lc3NhZ2VfX2l0ZW0gZmxleC1lbmQiCn07CnZhciBfaG9pc3RlZF85ID0gewogIGNsYXNzOiAibWVzc2FnZV9faXRlbS0tY29udGVudCIKfTsKdmFyIF9ob2lzdGVkXzEwID0gewogIGtleTogMSwKICBjbGFzczogImxvYWRpbmdfX2NvbnRlbnQiLAogIHN0eWxlOiB7CiAgICAidGV4dC1hbGlnbiI6ICJjZW50ZXIiLAogICAgInBhZGRpbmciOiAiMHJlbSAycmVtIiwKICAgICJmb250LXNpemUiOiAiMS4zcmVtIiwKICAgICJmb250LXdlaWdodCI6ICI2MDAiCiAgfQp9Owp2YXIgX2hvaXN0ZWRfMTEgPSB7CiAgY2xhc3M6ICJjaGF0X19yaWdodC0tY29udGVudC0tY29udHJvbCIKfTsKdmFyIF9ob2lzdGVkXzEyID0gWyJ2YWx1ZSJdOwp2YXIgX2hvaXN0ZWRfMTMgPSBbInZhbHVlIl07CnZhciBfaG9pc3RlZF8xNCA9IHsKICBrZXk6IDMsCiAgY2xhc3M6ICJieCBieC1zZW5kIGRpc2FibGVkIgp9OwpleHBvcnQgZnVuY3Rpb24gcmVuZGVyKF9jdHgsIF9jYWNoZSwgJHByb3BzLCAkc2V0dXAsICRkYXRhLCAkb3B0aW9ucykgewogIHZhciBfJHByb3BzJG1lc3NhZ2VzOwoKICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKF9GcmFnbWVudCwgbnVsbCwgW19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzEsIFsoXyRwcm9wcyRtZXNzYWdlcyA9ICRwcm9wcy5tZXNzYWdlcykgIT09IG51bGwgJiYgXyRwcm9wcyRtZXNzYWdlcyAhPT0gdm9pZCAwICYmIF8kcHJvcHMkbWVzc2FnZXMubGVuZ3RoID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygiZGl2IiwgX2hvaXN0ZWRfMiwgWyhfb3BlbkJsb2NrKHRydWUpLCBfY3JlYXRlRWxlbWVudEJsb2NrKF9GcmFnbWVudCwgbnVsbCwgX3JlbmRlckxpc3QoJHByb3BzLm1lc3NhZ2VzLCBmdW5jdGlvbiAobWVzc2FnZSkgewogICAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygiZGl2IiwgewogICAgICBrZXk6IG1lc3NhZ2UuaWQKICAgIH0sIFttZXNzYWdlLmlzX3VzZXIgPT0gJHByb3BzLmlkID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygiZGl2IiwgX2hvaXN0ZWRfMywgW19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzQsIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJpbWciLCB7CiAgICAgIHNyYzogJGRhdGEudXJsSW1hZ2UgKyAobWVzc2FnZS5pc191c2VyID09ICRwcm9wcy5pZCA/ICd1c2VyLXZlY3Rvci5qcGVnJyA6ICdkb2N0b3ItdmVjdG9yLndlYnAnKSwKICAgICAgYWx0OiAiIgogICAgfSwgbnVsbCwgOAogICAgLyogUFJPUFMgKi8KICAgICwgX2hvaXN0ZWRfNSksIF9ob2lzdGVkXzZdKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfNywgW19jcmVhdGVFbGVtZW50Vk5vZGUoInAiLCBudWxsLCBfdG9EaXNwbGF5U3RyaW5nKG1lc3NhZ2UuY29udGVudF9jaGF0KSwgMQogICAgLyogVEVYVCAqLwogICAgKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgic3BhbiIsIG51bGwsIF90b0Rpc3BsYXlTdHJpbmcoJGRhdGEubW9tZW50KG1lc3NhZ2UuY3JlYXRlZF9hdF9tYWluKS5mcm9tTm93KCkpLCAxCiAgICAvKiBURVhUICovCiAgICApXSldKSkgOiAoX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJkaXYiLCBfaG9pc3RlZF84LCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfOSwgW19jcmVhdGVFbGVtZW50Vk5vZGUoInAiLCBudWxsLCBfdG9EaXNwbGF5U3RyaW5nKG1lc3NhZ2UuY29udGVudF9jaGF0KSwgMQogICAgLyogVEVYVCAqLwogICAgKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgic3BhbiIsIG51bGwsIF90b0Rpc3BsYXlTdHJpbmcoJGRhdGEubW9tZW50KG1lc3NhZ2UuY3JlYXRlZF9hdF9tYWluKS5mcm9tTm93KCkpLCAxCiAgICAvKiBURVhUICovCiAgICApXSldKSldKTsKICB9KSwgMTI4CiAgLyogS0VZRURfRlJBR01FTlQgKi8KICApKV0pKSA6IChfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soImRpdiIsIF9ob2lzdGVkXzEwLCAiIELDonkgZ2nhu50gYuG6oW4gY8OzIHRo4buDIHRyw7IgY2h1eeG7h24gduG7m2kgYsOhYyBzxKkgIikpXSwgNTEyCiAgLyogTkVFRF9QQVRDSCAqLwogICksIF9jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzExLCBbJGRhdGEubG9hZGluZyA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soImlucHV0IiwgewogICAga2V5OiAwLAogICAgdHlwZTogInRleHQiLAogICAgcGxhY2Vob2xkZXI6ICJTZWFyY2giLAogICAgdmFsdWU6ICRkYXRhLmNvbnRlbnQsCiAgICBkaXNhYmxlZDogIiIKICB9LCBudWxsLCA4CiAgLyogUFJPUFMgKi8KICAsIF9ob2lzdGVkXzEyKSkgOiAoX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJpbnB1dCIsIHsKICAgIGtleTogMSwKICAgIHR5cGU6ICJ0ZXh0IiwKICAgIG9uS2V5ZG93bjogX2NhY2hlWzBdIHx8IChfY2FjaGVbMF0gPSBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgIHJldHVybiAkb3B0aW9ucy5oYW5kbGVJbnB1dFNlbmRNZXNzYWdlKCRldmVudCk7CiAgICB9KSwKICAgIG9uSW5wdXQ6IF9jYWNoZVsxXSB8fCAoX2NhY2hlWzFdID0gZnVuY3Rpb24gKCRldmVudCkgewogICAgICByZXR1cm4gJG9wdGlvbnMub25JbnB1dCgkZXZlbnQpOwogICAgfSksCiAgICB2YWx1ZTogJGRhdGEuY29udGVudCwKICAgIHBsYWNlaG9sZGVyOiAiU2VhcmNoIgogIH0sIG51bGwsIDQwCiAgLyogUFJPUFMsIEhZRFJBVEVfRVZFTlRTICovCiAgLCBfaG9pc3RlZF8xMykpLCAkZGF0YS5jb250ZW50Lmxlbmd0aCAhPT0gMCA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soInNwYW4iLCB7CiAgICBrZXk6IDIsCiAgICBvbkNsaWNrOiBfY2FjaGVbMl0gfHwgKF9jYWNoZVsyXSA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuICRvcHRpb25zLmhhbmRsZVNlbmRNZXNzYWdlICYmICRvcHRpb25zLmhhbmRsZVNlbmRNZXNzYWdlLmFwcGx5KCRvcHRpb25zLCBhcmd1bWVudHMpOwogICAgfSksCiAgICBjbGFzczogX25vcm1hbGl6ZUNsYXNzKCRkYXRhLmxvYWRpbmcgPyAnYnggYngtbG9hZGVyIGxvYWRpbmcnIDogJ2J4IGJ4LXNlbmQnKQogIH0sIG51bGwsIDIKICAvKiBDTEFTUyAqLwogICkpIDogKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygic3BhbiIsIF9ob2lzdGVkXzE0KSldKV0sIDY0CiAgLyogU1RBQkxFX0ZSQUdNRU5UICovCiAgKTsKfQ=="},{"version":3,"mappings":";;EACSA,KAAK,EAAC;EAAgCC,GAAG,EAAC;;;;;;;EAGDD,KAAK,EAAC;;;EAC/BA,KAAK,EAAC;;;;8BAGPE,oBAAa,MAAb,EAAa,IAAb,EAAa,IAAb,EAAa;AAAA;AAAb;;;EAECF,KAAK,EAAC;;;;EAOHA,KAAK,EAAC;;;EACTA,KAAK,EAAC;;;;EASXA,KAAK,EAAC;EACdG,KAAgF,EAAhF;IAAA;IAAA;IAAA;IAAA;EAAA;;;EAIHH,KAAK,EAAC;;;;;;EAMMA,KAAK,EAAC;;;;;6DArCvBE,oBA8BM,KA9BN,cA8BM,qBA7BSE,6EAAUC,wBAArBC,oBAwBM,KAxBN,EAwBMC,UAxBN,EAwBM,oBAvBFD,oBAsBME,SAtBN,EAsBM,IAtBN,EAsBMC,YAtBiBL,eAsBjB,EAtByB,UAAnBM,OAAmB,EAAZ;yBAAnBJ,oBAsBM,KAtBN,EAsBM;MAtB4BK,GAAG,EAAED,OAAO,CAACE;IAsBzC,CAtBN,GACeF,OAAO,CAACG,OAAR,IAAmBT,2BAA9BE,oBAYM,KAZN,cAYM,CAXFJ,oBAIM,KAJN,cAIM,CAHFA,oBACW,KADX,EACW;MADLY,GAAG,EAAEC,kBAAYL,OAAO,CAACG,OAAR,IAAmBT,SAAnB,GAAqB,kBAArB,GAAqB,oBAAjC,CACA;MAAPY,GAAG,EAAC;IAAG,CADX;;IAAA,aAGE,EADFC,UACE,CAJN,CAWE,EANFf,oBAKM,KALN,cAKM,CAJFA,oBAAiC,GAAjC,EAAiC,IAAjC,EAAiCgB,iBAA3BR,OAAO,CAACS,YAAmB,CAAjC,EAA0B;IAAA;IAA1B,CAIE,EAHFjB,oBAEO,MAFP,EAEO,IAFP,EAEOgB,iBADAH,aAAOL,OAAO,CAACU,eAAf,EAAgCC,OAAhC,EACA,CAFP,EAC8C;IAAA;IAD9C,CAGE,CALN,CAME,CAZN,oBAaAf,oBAOM,KAPN,cAOM,CANFJ,oBAKM,KALN,cAKM,CAJFA,oBAAiC,GAAjC,EAAiC,IAAjC,EAAiCgB,iBAA3BR,OAAO,CAACS,YAAmB,CAAjC,EAA0B;IAAA;IAA1B,CAIE,EAHFjB,oBAEO,MAFP,EAEO,IAFP,EAEOgB,iBADAH,aAAOL,OAAO,CAACU,eAAf,EAAgCC,OAAhC,EACA,CAFP,EAC8C;IAAA;IAD9C,CAGE,CALN,CAME,CAPN,GAdJ;GAsBM,CAtBN;;EAAA,CAuBE,EAxBN,oBAyBAf,oBAGM,KAHN,eACqF,4CADrF,EAIE,CA9BN;;EAAA,GA+BAJ,oBAOM,KAPN,eAOM,CANWa,+BAAbT,oBAAiF,OAAjF,EAAiF;UAAA;IAA3DgB,IAAI,EAAC,MAAsD;IAA/CC,WAAW,EAAC,QAAmC;IAAzBC,KAAK,EAAET,aAAkB;IAATU,QAAQ,EAAR;EAAS,CAAjF;;EAAA,iCACAnB,oBACyB,OADzB,EACyB;UAAA;IADXgB,IAAI,EAAC,MACM;IADEI,SAAO;MAAA,OAAEC,gCAAuBC,MAAvB,CAAF;IAAA,EACT;IAD4CC,OAAK;MAAA,OAAEF,iBAAQC,MAAR,CAAF;IAAA,EACjD;IADqEJ,KAAK,EAAET,aAC5E;IAArBQ,WAAW,EAAC;EAAS,CADzB;;EAAA,eAKE,EAHUR,cAAQV,MAAR,KAAc,mBAA1BC,oBACoE,MADpE,EACoE;UAAA;IADjCwB,OAAK;MAAA,OAAEH,mFAAF;IAAA,EAC4B;IAA/D3B,KAAK,kBAAEe,gBAAO,sBAAP,GAAO,YAAT;EAA0D,CADpE;;EAAA,oBAEAT,oBAAgD,MAAhD,eACE,CAPN","names":["class","ref","_createElementVNode","style","$props","length","_createElementBlock","_hoisted_2","_Fragment","_renderList","message","key","id","is_user","src","$data","alt","_hoisted_6","_toDisplayString","content_chat","created_at_main","fromNow","type","placeholder","value","disabled","onKeydown","$options","$event","onInput","onClick"],"sourceRoot":"","sources":["C:\\Users\\FPTSHOP\\Downloads\\doan-main\\doan-main\\web_hospitall\\src\\components\\ChatPopupContent.vue"],"sourcesContent":["<template>\n    <div class=\"chat__right--content--content\" ref=\"containerMessage\">\n        <div v-if=\"messages?.length\">\n            <div v-for=\"message in messages\" :key=\"message.id\">\n                <div v-if=\"message.is_user == id\" class=\"message__item flex-start\">\n                    <div class=\"message__item--image\">\n                        <img :src=\"urlImage + (message.is_user == id ? 'user-vector.jpeg' : 'doctor-vector.webp')\"\n                            alt=\"\">\n                        <span></span>\n                    </div>\n                    <div class=\"message__item--content\">\n                        <p>{{ message.content_chat }}</p>\n                        <span>\n                            {{ moment(message.created_at_main).fromNow() }}\n                        </span>\n                    </div>\n                </div>\n                <div v-else class=\"message__item flex-end\">\n                    <div class=\"message__item--content\">\n                        <p>{{ message.content_chat }}</p>\n                        <span>\n                            {{ moment(message.created_at_main).fromNow() }}\n                        </span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div v-else class=\"loading__content\"\n            style=\"text-align: center;padding:0rem 2rem;font-size: 1.3rem;font-weight: 600;\">\n            Bây giờ bạn có thể trò chuyện với bác sĩ\n        </div>\n    </div>\n    <div class=\"chat__right--content--control\">\n        <input v-if=\"loading\" type=\"text\" placeholder=\"Search\" :value=\"content\" disabled>\n        <input v-else type=\"text\" @keydown=\"handleInputSendMessage($event)\" @input=\"onInput($event)\" :value=\"content\"\n            placeholder=\"Search\">\n        <span v-if=\"content.length !== 0\" @click=\"handleSendMessage\"\n            :class=\"loading ? 'bx bx-loader loading' : 'bx bx-send'\"></span>\n        <span v-else class=\"bx bx-send disabled\"></span>\n    </div>\n</template>\n<script>\nimport { mapState } from 'vuex';\nimport moment from 'moment';\nimport { URL_IMAGE } from '../Config';\n\nmoment.locale(\"VI\");\n\nexport default {\n    props: ['messages', 'sendMessage', 'idadmin', 'id', 'doctor', 'setMessage', 'groupChat', '_id'],\n    data() {\n        return {\n            loading: false,\n            content: '',\n            moment: moment,\n            urlImage: URL_IMAGE\n        }\n    },\n    computed: {\n        ...mapState(['socket'])\n    },\n    methods: {\n        handleInputSendMessage: function (event) {\n            if (event.keyCode === 13) {\n                this.handleSendMessage();\n            }\n        },\n        handleSendMessage: function () {\n            if (this.content.length !== 0) {\n                this.loading = true;\n                this.sendMessage({ content_chat: this.content, idadmin: this.id });\n                this.loading = false;\n                this.content = '';\n            }\n        },\n        onInput: function (event) {\n            this.content = event.target.value\n        },\n        updateFormatTime: function (d) {\n            const checkNumber = (number) => number < 10 ? `0${number}` : number;\n            return checkNumber(d.getDate()) + \"-\" + checkNumber((d.getMonth() + 1)) + \"-\" + d.getFullYear() + \" \" +\n                checkNumber(d.getHours()) + \":\" + checkNumber(d.getMinutes())\n        },\n        socketOn: function () {\n            try {\n                this.socket.on(`_chatMessage.${this.groupChat?.id}.${this._id}`, (data) => {\n                    console.log('nhan roi ne');\n                    this.setMessage(data);\n                })\n            } catch (error) {\n                alert(error);\n            }\n        }\n    },\n    watch: {\n        groupChat: function () {\n            this.socketOn();\n        },\n        _id: function () {\n            this.socketOn();\n        },\n        messages: {\n            handler() {\n                if (this.$refs.containerMessage) {\n                    console.log(this.$refs.containerMessage.scrollHeight);\n                    this.$refs.containerMessage.scrollTop = this.$refs.containerMessage.scrollHeight;\n                }\n            },\n            immediate: true\n        }\n    },\n    mounted() {\n        this.socketOn();\n        if (this.$refs.containerMessage) {\n            console.log(this.$refs.containerMessage.scrollHeight);\n            this.$refs.containerMessage.scrollTop = this.$refs.containerMessage.scrollHeight;\n        }\n    }\n}\n</script>"]}]}